import type { ReactNode } from 'react';
import {
  createContext,
  createElement,
  useCallback,
  useContext,
  useEffect,
  useMemo,
  useState,
} from 'react';

export type Language = 'zh-CN' | 'en-US';

type I18nContextValue = {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
};

const STORAGE_KEY = 'homework-ai:language';

const enUS: Record<string, string> = {
  'admin.config.config': 'Config',
  'admin.config.section.llm': 'LLM Provider',
  'admin.config.section.ocr': 'OCR Service',
  'admin.config.section.budget': 'Budget Control',
  'admin.config.providerName': 'Provider Name',
  'admin.config.providerNamePlaceholder': 'OpenAI-compatible',
  'admin.config.baseUrl': 'Base URL',
  'admin.config.baseUrlPlaceholder': 'https://api.example.com',
  'admin.config.apiKey': 'API Key',
  'admin.config.apiKeyPlaceholder': 'sk-...',
  'admin.config.apiKeyHintSet': 'Key is already set. Leave blank to keep.',
  'admin.config.apiKeyHintEmpty': 'No API key stored.',
  'admin.config.clearApiKey': 'Clear API Key',
  'admin.config.model': 'Default Model',
  'admin.config.modelPlaceholder': 'gpt-4o-mini',
  'admin.config.cheaperModel': 'Cheaper Model',
  'admin.config.cheaperModelPlaceholder': 'gpt-4o-mini',
  'admin.config.qualityModel': 'Quality Model',
  'admin.config.qualityModelPlaceholder': 'gpt-4.1',
  'admin.config.maxTokens': 'Max Tokens',
  'admin.config.temperature': 'Temperature',
  'admin.config.topP': 'Top P',
  'admin.config.presencePenalty': 'Presence Penalty',
  'admin.config.frequencyPenalty': 'Frequency Penalty',
  'admin.config.timeoutMs': 'Timeout (ms)',
  'admin.config.responseFormat': 'Response Format',
  'admin.config.responseFormatText': 'Text',
  'admin.config.responseFormatJson': 'JSON Object',
  'admin.config.stopSequences': 'Stop Sequences',
  'admin.config.stopSequencesPlaceholder': 'Add stop sequences',
  'admin.config.systemPrompt': 'System Prompt',
  'admin.config.systemPromptPlaceholder': 'Optional system prompt override',
  'admin.config.activeProvider': 'Active Provider',
  'admin.config.activeProviderPlaceholder': 'Use default provider',
  'admin.config.ocrBaseUrl': 'OCR Base URL',
  'admin.config.ocrBaseUrlPlaceholder': 'http://localhost:8000',
  'admin.config.ocrTimeout': 'OCR Timeout (ms)',
  'admin.config.budgetEnabled': 'Enable Daily Budget',
  'admin.config.budgetMode': 'Budget Mode',
  'admin.config.budgetHint': 'Soft mode degrades grading; hard mode blocks requests.',
  'admin.config.save': 'Save Changes',
  'admin.config.saved': 'System config saved',
  'admin.config.testLlm': 'Test LLM',
  'admin.config.testOcr': 'Test OCR',
  'admin.config.llmHealthOk': 'LLM connection OK',
  'admin.config.llmHealthFail': 'LLM connection failed',
  'admin.config.ocrHealthOk': 'OCR connection OK',
  'admin.config.ocrHealthFail': 'OCR connection failed',
  'admin.config.lastChecked': 'Last checked',
  'admin.config.section.llmProviders': 'LLM 提供商',
  'admin.config.section.llmTest': 'LLM Test Call',
  'admin.config.section.llmLogs': 'LLM Call Logs',
  'admin.config.provider': '提供商',
  'admin.config.providerId': '提供商 ID',
  'admin.config.providerIdPlaceholder': 'deepseek',
  'admin.config.providerIdRequired': 'Provider ID is required',
  'admin.config.baseUrlRequired': 'Base URL is required',
  'admin.config.providerPath': 'Endpoint Path',
  'admin.config.providerPathPlaceholder': '/v1/chat/completions',
  'admin.config.providerEnabled': 'Enabled',
  'admin.config.customHeaders': 'Custom Headers',
  'admin.config.headerKey': 'Header Key',
  'admin.config.headerValue': 'Header Value',
  'admin.config.headerKeyRequired': 'Header key is required',
  'admin.config.headerValueRequired': 'Header value is required',
  'admin.config.secret': 'Secret',
  'admin.config.public': 'Public',
  'admin.config.addHeader': 'Add Header',
  'admin.config.modelPricing': 'Model Pricing',
  'admin.config.priceIn': 'Input Price',
  'admin.config.priceOut': 'Output Price',
  'admin.config.modelRequired': 'Model name required',
  'admin.config.addModel': 'Add Model',
  'admin.config.addProvider': 'Add Provider',
  'admin.config.testProvider': 'Provider',
  'admin.config.testProviderPlaceholder': 'Use active provider',
  'admin.config.testModel': 'Model Override',
  'admin.config.testPrompt': 'Test Prompt',
  'admin.config.testPromptPlaceholder': 'Say hello in one sentence',
  'admin.config.testPromptRequired': 'Prompt is required',
  'admin.config.runTest': 'Run Test',
  'admin.config.testSuccess': 'Success',
  'admin.config.testFailed': 'Failed',
  'admin.config.llmTestFailed': 'LLM test failed',
  'admin.config.logTime': 'Time',
  'admin.config.logProvider': 'Provider / Model',
  'admin.config.logStatus': 'Status',
  'admin.config.logSource': 'Source',
  'admin.config.logTokens': 'Tokens',
  'admin.config.logLatency': 'Latency',
  'admin.config.logCost': 'Cost',
  'admin.config.logId': 'Log ID',
  'admin.config.logProviderName': 'Provider',
  'admin.config.logProviderId': 'Provider ID',
  'admin.config.logModel': 'Model',
  'admin.config.logUserId': 'User ID',
  'admin.config.logSubmissionId': 'Submission ID',
  'admin.config.logPrompt': 'Prompt',
  'admin.config.logSystemPrompt': 'System Prompt',
  'admin.config.logResponse': 'Response',
  'admin.config.logError': 'Error',
  'admin.config.logMeta': 'Meta',
  'admin.config.logDetailTitle': 'LLM Log Detail',
  'admin.config.logProviderPlaceholder': 'Filter provider',
  'admin.config.logStatusPlaceholder': 'Filter status',
  'admin.config.logSourcePlaceholder': 'Filter source',
  'admin.config.confirmClearLogs': 'Clear logs before selected date?',
  'admin.config.clearLogs': 'Clear Logs',
  'admin.config.clearBefore': 'Clear logs before',
  'admin.config.llmLogsCleared': 'Logs cleared',
  'admin.config.llmLogsClearFailed': 'Failed to clear logs',
  'admin.config.dailyBudgetLimit': 'Daily Budget Limit',
  'admin.config.enableBudgetLimit': 'Enable Budget Limit',
  'admin.config.title': 'Admin Config',
  'admin.dashboard.activeUsers': 'Active Users',
  'admin.dashboard.awaitingMetrics': 'Awaiting user metrics.',
  'admin.dashboard.llmCallsToday': 'LLM Calls Today',
  'admin.dashboard.monitoringEmpty': 'Monitoring dashboards will appear here',
  'admin.dashboard.realtimeUsage': 'Realtime usage will appear here.',
  'admin.dashboard.retentionPending': 'Scheduled retention results pending.',
  'admin.dashboard.retentionRuns': 'Retention Runs',
  'admin.dashboard.systemOverview': 'System Overview',
  'admin.dashboard.totalUsers': 'Total Users',
  'admin.dashboard.totalClasses': 'Total Classes',
  'admin.dashboard.submissionsToday': 'Submissions Today',
  'admin.dashboard.classHint': 'Active classes with students.',
  'admin.dashboard.submissionHint': 'New submissions since midnight.',
  'admin.dashboard.classSizeTitle': 'Class Size Overview',
  'admin.dashboard.viewAllClasses': 'View all classes',
  'admin.dashboard.noClasses': 'No classes yet',
  'admin.dashboard.students': 'Students',
  'admin.dashboard.teachers': 'Teachers',
  'admin.dashboard.homeworks': 'Homeworks',
  'admin.dashboard.admins': 'Admins',
  'admin.dashboard.title': 'Admin Dashboard',
  'admin.usage.title': 'Usage Dashboard',
  'admin.usage.rangeDays': 'Range (days)',
  'admin.usage.summary': 'Summary',
  'admin.usage.total': 'Total',
  'admin.usage.dailyTrend': 'Daily Trend',
  'admin.usage.errorBreakdown': 'Error Breakdown',
  'admin.usage.noErrors': 'No errors',
  'admin.usage.empty': 'No usage data',
  'admin.usage.loadFailed': 'Failed to load usage',
  'admin.usage.updatedAt': 'Updated',
  'admin.classes.title': 'Class Management',
  'admin.classes.empty': 'No classes available',
  'admin.classes.loadFailed': 'Failed to load classes',
  'admin.classes.noTeachers': 'No teachers',
  'admin.classes.teacherLabel': 'Teachers',
  'admin.classes.assignTeachers': 'Assign Teachers',
  'admin.classes.assignTeachersSuccess': 'Teachers updated',
  'admin.classes.assignTeachersFailed': 'Failed to update teachers',
  'admin.classes.manageStudents': 'Manage Students',
  'admin.classes.selectClass': 'Select a class',
  'admin.classes.noStudents': 'No students in class',
  'admin.classes.removeStudent': 'Remove',
  'admin.classes.removeStudentSuccess': 'Student removed',
  'admin.classes.removeStudentFailed': 'Failed to remove student',
  'admin.classes.importTitle': 'Import Students',
  'admin.classes.importStudents': 'Import Students',
  'admin.classes.importLabel': 'Student List',
  'admin.classes.importPlaceholder': 'account,name per line (comma or tab)',
  'admin.classes.importHint': 'Example: student01,Student 01',
  'admin.classes.importEmpty': 'Please paste student list',
  'admin.classes.importRequired': 'Student list is required',
  'admin.classes.importSuccess': 'Imported students',
  'admin.classes.importFailed': 'Failed to import students',
  'admin.classes.studentCount': 'Students',
  'admin.retention.dryRun': 'Dry Run',
  'admin.retention.logsEmpty': 'Retention history will appear here',
  'admin.retention.logsTitle': 'Retention Logs',
  'admin.retention.nextRun': 'Next Run',
  'admin.retention.nextRunValue': 'Scheduled by backend cron',
  'admin.retention.batchSize': 'Batch Size',
  'admin.retention.runRetention': 'Auto Run',
  'admin.retention.runTitle': 'Run Retention',
  'admin.retention.runNow': 'Run Now',
  'admin.retention.runSuccess': 'Retention started',
  'admin.retention.runFailed': 'Retention failed',
  'admin.retention.lastRun': 'Last Run',
  'admin.retention.ranAt': 'Ran At',
  'admin.retention.mode': 'Mode',
  'admin.retention.dryRunMode': 'Dry Run',
  'admin.retention.liveMode': 'Live',
  'admin.retention.scanned': 'Scanned',
  'admin.retention.deleted': 'Deleted',
  'admin.retention.minioOk': 'MinIO OK',
  'admin.retention.minioFailed': 'MinIO Failed',
  'admin.retention.dbFailed': 'DB Failed',
  'admin.retention.duration': 'Duration',
  'admin.retention.title': 'Retention',
  'admin.retention.window': 'Retention Window',
  'admin.retention.windowValue': '7 days',
  'admin.systemBudget.budgetMode': 'Budget Mode',
  'admin.systemBudget.dailyCallLimit': 'Daily Call Limit',
  'admin.systemBudget.empty': 'Budget analytics will appear here',
  'admin.systemBudget.mode.soft': 'Soft',
  'admin.systemBudget.mode.hard': 'Hard',
  'admin.systemBudget.title': 'System Budget',
  'admin.systemBudget.tokenLimit': 'Token Limit',
  'admin.systemBudget.usageTrends': 'Usage Trends',
  'admin.users.empty': 'No users available',
  'admin.users.emptyHint': 'User management data will appear here once connected.',
  'admin.users.loadError': 'Failed to load users',
  'admin.users.name': 'Name',
  'admin.users.role': 'Role',
  'admin.users.searchPlaceholder': 'Search user',
  'admin.users.status': 'Status',
  'admin.users.active': 'Active',
  'admin.users.createUser': 'Create User',
  'admin.users.accountPlaceholder': 'student01',
  'admin.users.accountRequired': 'Please input account',
  'admin.users.namePlaceholder': 'Student 01',
  'admin.users.nameRequired': 'Please input name',
  'admin.users.password': 'Password',
  'admin.users.passwordRequired': 'Please input password',
  'admin.users.createSuccess': 'User created',
  'admin.users.createFailed': 'Failed to create user',
  'admin.users.changeRole': 'Change Role',
  'admin.users.updateSuccess': 'User updated',
  'admin.users.updateFailed': 'Failed to update user',
  'admin.users.resetPassword': 'Reset Password',
  'admin.users.newPassword': 'New Password',
  'admin.users.resetSuccess': 'Password reset',
  'admin.users.resetFailed': 'Failed to reset password',
  'admin.users.assignClass': 'Assign Class',
  'admin.users.assignClassLabel': 'Class',
  'admin.users.assignClassPlaceholder': 'Select class',
  'admin.users.assignClassRequired': 'Please select class',
  'admin.users.assignSuccess': 'Student assigned',
  'admin.users.assignFailed': 'Failed to assign student',
  'app.adminConsole': 'Admin Console',
  'app.teacherConsole': 'Teacher Console',
  'app.title': 'Homework AI',
  'common.account': 'Account',
  'common.action': 'Action',
  'common.allRoles': 'All roles',
  'common.allStatuses': 'All statuses',
  'common.avgShort': 'Avg',
  'common.backToClasses': 'Back to Classes',
  'common.backToHomeworks': 'Back to Homeworks',
  'common.class': 'Class',
  'common.close': 'Close',
  'common.description': 'Description',
  'common.detail': 'Detail',
  'common.days': 'days',
  'common.disabled': 'Disabled',
  'common.enabled': 'Enabled',
  'common.due': 'Due',
  'common.dueAt': 'Due At',
  'common.dueDate': 'Due Date',
  'common.homework': 'Homework',
  'common.language': 'Language',
  'common.lastUpdated': 'Last Updated',
  'common.last7Days': 'Last 7 days',
  'common.realtime': 'Realtime',
  'common.recent': 'Recent',
  'common.noDescription': 'No description',
  'common.noDescriptionProvided': 'No description provided.',
  'common.notConfigured': 'Not configured',
  'common.notSpecified': 'Not specified',
  'common.yes': 'Yes',
  'common.no': 'No',
  'common.overview': 'Overview',
  'common.reset': 'Reset',
  'common.remove': 'Remove',
  'common.retry': 'Retry',
  'common.score': 'Score',
  'common.search': 'Search',
  'common.status': 'Status',
  'common.student': 'Student',
  'common.submit': 'Submit',
  'common.title': 'Title',
  'common.tryAgain': 'Please try again.',
  'common.view': 'View',
  'common.viewAllSubmissions': 'View All Submissions',
  'errors.pageNotFoundSubtitle': 'The page you visited does not exist.',
  'errors.pageNotFoundTitle': 'Page Not Found',
  'login.account': 'Account',
  'login.accountPlaceholder': 'student01',
  'login.accountRequired': 'Please input account',
  'login.failure': 'Login failed. Check your account or password.',
  'login.password': 'Password',
  'login.passwordPlaceholder': 'Enter your password',
  'login.passwordRequired': 'Please input password',
  'login.signIn': 'Sign in',
  'login.success': 'Login successful',
  'login.title': 'Login',
  'login.welcomeTitle': 'Welcome back',
  'login.welcomeSubtitle': 'Access class progress, student work, and learning insights in one clean dashboard.',
  'nav.admin': 'Admin',
  'nav.budget': 'Budget',
  'nav.classes': 'Classes',
  'nav.config': 'Config',
  'nav.dashboard': 'Dashboard',
  'nav.grading': 'Grading',
  'nav.homeworks': 'Homeworks',
  'nav.report': 'Report',
  'nav.reports': 'Reports',
  'nav.retention': 'Retention',
  'nav.settings': 'Settings',
  'nav.student': 'Student',
  'nav.students': 'Students',
  'nav.submissions': 'Submissions',
  'nav.system': 'System',
  'nav.teacher': 'Teacher',
  'nav.users': 'Users',
  'nav.usage': 'Usage',
  'role.admin': 'Admin',
  'role.student': 'Student',
  'role.teacher': 'Teacher',
  'status.completed': 'Completed',
  'status.done': 'Done',
  'status.failed': 'Failed',
  'status.noDue': 'No due date',
  'status.open': 'Open',
  'status.overdue': 'Overdue',
  'status.processing': 'Processing',
  'status.queued': 'Queued',
  'student.dashboard.assignmentsAvailable': 'Assignments Available',
  'student.dashboard.avgScoreTrend': 'Average Score Trend',
  'student.dashboard.loadError': 'Failed to load dashboard data',
  'student.dashboard.noErrorInsights': 'No error insights yet',
  'student.dashboard.noSubmissionSummary': 'No submission summary yet',
  'student.dashboard.noUpcomingDeadlines': 'No upcoming deadlines',
  'student.dashboard.reviewDeadlines': 'Review deadlines in Homeworks',
  'student.dashboard.scoreTrendPlaceholder': 'Score trend will appear here',
  'student.dashboard.topErrorTypes': 'Top Error Types',
  'student.dashboard.upcomingDeadlines': 'Upcoming Deadlines',
  'student.dashboard.updatedFromList': 'Updated from your latest homework list.',
  'student.dashboard.weeklySubmissions': 'Weekly Submissions',
  'student.homeworkDetail.flexible': 'Flexible',
  'student.homeworkDetail.loadError': 'Failed to load homework',
  'student.homeworkDetail.noSubmissionHistory': 'No submission history available',
  'student.homeworkDetail.notFound': 'Homework not found',
  'student.homeworkDetail.submissionHistory': 'Submission History',
  'student.homeworkDetail.submitHomework': 'Submit Homework',
  'student.homeworkDetail.title': 'Homework Detail',
  'student.homeworks.empty': 'No homework available',
  'student.homeworks.emptyHint': 'Assignments will appear here once your teacher publishes them.',
  'student.homeworks.flexibleDeadline': 'Flexible deadline',
  'student.homeworks.loadError': 'Failed to load homeworks',
  'student.homeworks.searchPlaceholder': 'Search homework or class',
  'student.homeworks.title': 'My Homeworks',
  'student.report.empty': 'No analytics yet',
  'student.report.emptyHint': 'Charts and trends will appear here once analytics endpoints are available.',
  'student.report.loadError': 'Failed to load report',
  'student.report.rangeDays': 'Range (days)',
  'student.report.summary': 'Summary',
  'student.report.avgScore': 'Average Score',
  'student.report.highestScore': 'Highest Score',
  'student.report.lowestScore': 'Lowest Score',
  'student.report.submissions': 'Submissions',
  'student.report.noCompleted': 'No completed submissions yet',
  'student.report.trend': 'Trend',
  'student.report.noTrend': 'No trend data',
  'student.report.errorTypes': 'Top Error Types',
  'student.report.noErrorStats': 'No error stats',
  'student.report.nextSteps': 'Next Steps',
  'student.report.noNextSteps': 'No next-step suggestions',
  'student.report.exportPdf': 'Export PDF',
  'student.report.exportFailed': 'Export failed',
  'student.report.title': 'Personal Report',
  'student.submissions.empty': 'No submissions yet',
  'student.submissions.emptyHint': 'Your submission history will appear here after you upload homework.',
  'student.submissions.scoreRange': 'Score',
  'student.submissions.dateRangeStart': 'Start date',
  'student.submissions.dateRangeEnd': 'End date',
  'student.submissions.exportCsv': 'Export CSV',
  'student.submissions.exportFailed': 'Export failed',
  'student.submissions.loadError': 'Failed to load submissions',
  'student.submissions.searchPlaceholder': 'Search by homework',
  'submission.error.llmError': 'Grading service error. Please retry.',
  'submission.error.llmInvalid': 'Grading output was invalid. Please retry.',
  'submission.error.llmQuota': 'Daily grading quota exceeded. Please try tomorrow.',
  'submission.error.llmTimeout': 'Grading timed out. Please try again later.',
  'submission.error.ocrEmpty': 'No readable text was detected. Please upload clearer images.',
  'submission.error.ocrError': 'OCR service error. Please retry.',
  'submission.error.ocrTimeout': 'OCR timed out. Please try again later.',
  'submission.errors': 'Errors',
  'submission.failureFallback': 'Please try submitting again later.',
  'submission.feedback': 'Feedback',
  'submission.highlights': 'Highlights',
  'submission.loadError': 'Failed to load submission',
  'submission.nextSteps': 'Next Steps',
  'submission.noData': 'No submission data',
  'submission.noNextSteps': 'No next steps yet',
  'submission.ocrLength': 'OCR Length',
  'submission.ocrText': 'OCR Text',
  'submission.processingFailed': 'Processing failed',
  'submission.processingTimeline': 'Processing Timeline',
  'submission.resultTitle': 'Submission Result',
  'submission.rewrite': 'Rewrite',
  'submission.sampleEssay': 'Sample Essay',
  'submission.suggestionsErrors': 'Errors',
  'submission.suggestionsErrorsEmpty': 'No errors detected',
  'submission.suggestionsHigh': 'High',
  'submission.suggestionsHighEmpty': 'No high-tier suggestions',
  'submission.suggestionsLow': 'Low',
  'submission.suggestionsLowEmpty': 'No low-tier suggestions',
  'submission.suggestionsMid': 'Mid',
  'submission.suggestionsMidEmpty': 'No mid-tier suggestions',
  'submission.suggestionsSummary': 'Summary',
  'submission.suggestionsSummaryEmpty': 'Summary will appear after grading',
  'submission.summary': 'Summary',
  'submission.timeline.completed': 'Completed',
  'submission.timeline.failed': 'Failed',
  'submission.timeline.llmGrading': 'LLM Grading',
  'submission.timeline.ocrProcessing': 'OCR Processing',
  'submission.timeline.queued': 'Queued',
  'submission.totalScore': 'Total Score',
  'submission.waiting': 'Waiting for processing',
  'submit.breadcrumb': 'Submit',
  'submit.created': 'Submission created',
  'submit.draggerHint': 'JPG/PNG, upload 1 to 3 images. Clear handwriting improves OCR accuracy.',
  'submit.draggerText': 'Drag & drop images or click to upload',
  'submit.failed': 'Failed to submit, please try again',
  'submit.missingId': 'Missing homework id',
  'submit.missingReference': 'Missing homework reference',
  'submit.missingReferenceDesc': 'Please return to the homework list and choose an assignment.',
  'submit.onlyThree': 'Only 3 images allowed',
  'submit.tip1': 'Upload 1-3 clear images of your handwritten essay.',
  'submit.tip2': 'Avoid shadows and crop margins for best OCR results.',
  'submit.tip3': 'Make sure your handwriting is legible and aligned.',
  'submit.tipsTitle': 'Submission Tips',
  'submit.title': 'Submit Homework',
  'submit.uploadAtLeastOne': 'Please upload at least one image',
  'submit.uploadLimit': 'You can upload up to 3 images',
  'submit.uploadTitle': 'Upload Your Work',
  'teacher.classDetail.className': 'Class Name',
  'teacher.classDetail.grade': 'Grade',
  'teacher.classDetail.loadError': 'Failed to load class',
  'teacher.classDetail.loadHomeworksError': 'Failed to load homeworks',
  'teacher.classDetail.loadStudentsError': 'Failed to load students',
  'teacher.classDetail.noHomeworks': 'No homeworks yet',
  'teacher.classDetail.noStudents': 'No students yet',
  'teacher.classDetail.notFound': 'Class not found',
  'teacher.classDetail.downloadReport': 'Download PDF',
  'teacher.classDetail.downloadFailed': 'Failed to download report',
  'teacher.classDetail.importTitle': 'Import Students',
  'teacher.classDetail.importStudents': 'Import Students',
  'teacher.classDetail.importLabel': 'Student List',
  'teacher.classDetail.importPlaceholder': 'account,name per line (comma or tab)',
  'teacher.classDetail.importHint': 'Example: student01,Student 01',
  'teacher.classDetail.importEmpty': 'Please paste student list',
  'teacher.classDetail.importRequired': 'Student list is required',
  'teacher.classDetail.importSuccess': 'Imported students',
  'teacher.classDetail.importFailed': 'Failed to import students',
  'teacher.classDetail.studentName': 'Student Name',
  'teacher.classDetail.title': 'Class Detail',
  'teacher.classDetail.unassigned': 'Unassigned',
  'teacher.classes.class': 'Class',
  'teacher.classes.className': 'Class Name',
  'teacher.classes.classNamePlaceholder': 'Class 1A',
  'teacher.classes.classNameRequired': 'Please input class name',
  'teacher.classes.create': 'Create Class',
  'teacher.classes.createFailed': 'Failed to create class',
  'teacher.classes.created': 'Class created',
  'teacher.classes.empty': 'No classes yet',
  'teacher.classes.grade': 'Grade',
  'teacher.classes.gradePlaceholder': 'Grade 7',
  'teacher.classes.loadError': 'Failed to load classes',
  'teacher.classes.unassigned': 'Unassigned',
  'teacher.dashboard.avgScoreTrend': 'Average Score Trend',
  'teacher.dashboard.classes': 'Classes',
  'teacher.dashboard.loadError': 'Failed to load dashboard',
  'teacher.dashboard.noActivity': 'No activity data yet',
  'teacher.dashboard.noInsights': 'No insights yet',
  'teacher.dashboard.reviewSchedules': 'Review class schedules',
  'teacher.dashboard.scoreTrendPlaceholder': 'Score trend will appear here',
  'teacher.dashboard.submissionActivity': 'Submission Activity',
  'teacher.dashboard.topMistakes': 'Top Mistakes',
  'teacher.dashboard.trackClasses': 'Track active classes you manage.',
  'teacher.dashboard.upcomingDeadlines': 'Upcoming Deadlines',
  'teacher.homeworkDetail.classReference': 'Class Reference',
  'teacher.homeworkDetail.loadSubmissionsError': 'Failed to load submissions',
  'teacher.homeworkDetail.noSubmissions': 'No submissions yet',
  'teacher.homeworkDetail.noSubmissionsHint': 'Submissions will appear here once students upload their work.',
  'teacher.homeworkDetail.notSpecified': 'Not specified',
  'teacher.homeworkDetail.searchPlaceholder': 'Search student or account',
  'teacher.homeworkDetail.scoreRange': 'Score',
  'teacher.homeworkDetail.dateRangeStart': 'Start date',
  'teacher.homeworkDetail.dateRangeEnd': 'End date',
  'teacher.homeworkDetail.retryFailed': 'Regrade Failed',
  'teacher.homeworkDetail.retryFailedSuccess': 'Regrade queued',
  'teacher.homeworkDetail.retryFailedFailed': 'Failed to regrade failed submissions',
  'teacher.homeworkDetail.regrade': 'Regrade',
  'teacher.homeworkDetail.regradeQuality': 'Regrade (Quality)',
  'teacher.homeworkDetail.regradeSuccess': 'Regrade queued',
  'teacher.homeworkDetail.regradeFailed': 'Failed to regrade',
  'teacher.homeworkDetail.exportCsv': 'Export CSV',
  'teacher.homeworkDetail.exportImages': 'Download Images',
  'teacher.homeworkDetail.exportReminders': 'Export Reminders',
  'teacher.homeworkDetail.exportFailed': 'Export failed',
  'teacher.homeworkDetail.title': 'Homework Detail',
  'teacher.homeworkDetail.unavailable': 'Homework details unavailable',
  'teacher.batchUpload.title': 'Batch Upload',
  'teacher.batchUpload.tipsTitle': 'Upload Tips',
  'teacher.batchUpload.tip1': 'Use student account as folder name or filename prefix.',
  'teacher.batchUpload.tip2': 'Example: student01/1.jpg or student01__1.jpg.',
  'teacher.batchUpload.tip3': 'Zip files or up to 100 images per batch.',
  'teacher.batchUpload.draggerText': 'Drag & drop zip or images here, or click to upload',
  'teacher.batchUpload.draggerHint': 'Supports .zip and image files. Max 100 images per batch.',
  'teacher.batchUpload.preview': 'Preview Mapping',
  'teacher.batchUpload.previewTitle': 'Preview Summary',
  'teacher.batchUpload.previewSuccess': 'Preview ready',
  'teacher.batchUpload.previewFailed': 'Preview failed',
  'teacher.batchUpload.submit': 'Start Upload',
  'teacher.batchUpload.applyUpload': 'Apply & Upload',
  'teacher.batchUpload.success': 'Batch upload queued',
  'teacher.batchUpload.failed': 'Batch upload failed',
  'teacher.batchUpload.uploadAtLeastOne': 'Please upload at least one file',
  'teacher.batchUpload.invalidFile': 'Only image files or a .zip archive are allowed',
  'teacher.batchUpload.onlyOneZip': 'Only one zip file is allowed',
  'teacher.batchUpload.zipOrImagesOnly': 'Please upload either a zip or images, not both',
  'teacher.batchUpload.imageLimit': 'Up to 100 images are allowed',
  'teacher.batchUpload.missingHomework': 'Missing homework reference',
  'teacher.batchUpload.resultTitle': 'Upload Summary',
  'teacher.batchUpload.totalImages': 'Total Images',
  'teacher.batchUpload.matchedImages': 'Matched Images',
  'teacher.batchUpload.unmatchedImages': 'Unmatched Images',
  'teacher.batchUpload.acceptedImages': 'Accepted Images',
  'teacher.batchUpload.createdSubmissions': 'Created Submissions',
  'teacher.batchUpload.groupsTitle': 'Matched Students',
  'teacher.batchUpload.imageCount': 'Images',
  'teacher.batchUpload.noGroups': 'No matched students',
  'teacher.batchUpload.unmatchedTitle': 'Unmatched Files',
  'teacher.batchUpload.assignStudent': 'Assign student',
  'teacher.batchUpload.noUnmatched': 'No unmatched files',
  'teacher.batchUpload.skippedTitle': 'Skipped Files',
  'teacher.batchUpload.noSkipped': 'No skipped files',
  'teacher.batchUpload.reason.nonImage': 'Not an image',
  'teacher.batchUpload.reason.accountNotFound': 'Student account not found',
  'teacher.batchUpload.reason.studentNotFound': 'Student not found in class',
  'teacher.batchUpload.historyTitle': 'Upload History',
  'teacher.batchUpload.historyEmpty': 'No upload history',
  'teacher.batchUpload.historyCreatedAt': 'Uploaded At',
  'teacher.batchUpload.historyUploader': 'Uploader',
  'teacher.batchUpload.historyStatus': 'Status',
  'teacher.batchUpload.progress': 'Progress',
  'teacher.batchUpload.retryFailed': 'Retry Failed',
  'teacher.batchUpload.retryFailedSuccess': 'Retry queued',
  'teacher.batchUpload.retryFailedFailed': 'Retry failed',
  'teacher.batchUpload.partial': 'Partial',
  'teacher.batchUpload.empty': 'Empty',
  'teacher.batchUpload.detailTitle': 'Batch Upload Detail',
  'teacher.batchUpload.detailSummary': 'Batch Summary',
  'teacher.batchUpload.detailSkipped': 'Skipped Files',
  'teacher.batchUpload.detailNoSkipped': 'No skipped files',
  'teacher.batchUpload.detailSubmissions': 'Submissions',
  'teacher.batchUpload.detailEmpty': 'Batch not found',
  'teacher.batchUpload.detailLoadFailed': 'Failed to load batch',
  'teacher.batchUpload.mode': 'Mode',
  'teacher.batchUpload.needRewrite': 'Need Rewrite',
  'teacher.homeworks.createClass': 'Create a class',
  'teacher.homeworks.createFailed': 'Failed to create homework',
  'teacher.homeworks.createHomework': 'Create Homework',
  'teacher.homeworks.created': 'Homework created',
  'teacher.homeworks.descriptionPlaceholder': 'Write a 300-word essay',
  'teacher.homeworks.empty': 'No homeworks yet',
  'teacher.homeworks.homeworkTitle': 'Homework Title',
  'teacher.homeworks.homeworkTitlePlaceholder': 'Essay Practice',
  'teacher.homeworks.homeworkTitleRequired': 'Please input title',
  'teacher.homeworks.loadClassesError': 'Failed to load classes',
  'teacher.homeworks.loadHomeworksError': 'Failed to load homeworks',
  'teacher.homeworks.noClasses': 'No classes yet',
  'teacher.homeworks.submissionRate': 'Submitted',
  'teacher.homeworks.submissionStatus': 'Grading Status',
  'teacher.homeworks.pendingLabel': 'Pending',
  'teacher.homeworks.selectClass': 'Select class',
  'teacher.homeworks.selectClassFirst': 'Select a class first',
  'teacher.reports.avgScore': 'Average Score',
  'teacher.reports.highestScore': 'Highest Score',
  'teacher.reports.loadError': 'Failed to load report',
  'teacher.reports.lowestScore': 'Lowest Score',
  'teacher.reports.noCompleted': 'No completed submissions yet',
  'teacher.reports.noData': 'No report data',
  'teacher.reports.noDistribution': 'No distribution data',
  'teacher.reports.noErrorStats': 'No error stats',
  'teacher.reports.noRanking': 'No ranking data',
  'teacher.reports.noTrend': 'No trend data',
  'teacher.reports.rangeDays': 'Range (days)',
  'teacher.reports.insightsTitle': 'Class Insights',
  'teacher.reports.totalStudents': 'Total Students',
  'teacher.reports.submittedStudents': 'Submitted Students',
  'teacher.reports.pendingStudents': 'Pending Students',
  'teacher.reports.submissionRate': 'Submission Rate',
  'teacher.reports.exportPdf': 'Export PDF',
  'teacher.reports.exportCsv': 'Export CSV',
  'teacher.reports.exportFailed': 'Export failed',
  'teacher.reports.scoreDistribution': 'Score Distribution',
  'teacher.reports.selectClass': 'Select class',
  'teacher.reports.selectClassHint': 'Select a class to view reports',
  'teacher.reports.submissions': 'Submissions',
  'teacher.reports.summary': 'Summary',
  'teacher.reports.title': 'Class Reports',
  'teacher.reports.topErrorTypes': 'Top Error Types',
  'teacher.reports.topStudents': 'Top Students',
  'teacher.reports.trend': 'Trend',
  'teacher.settings.advancedEmpty': 'Advanced grading settings are managed by admin',
  'teacher.settings.advancedTitle': 'Advanced Settings',
  'teacher.settings.budgetMode': 'Budget Mode',
  'teacher.settings.configuredByAdmin': 'Configured by administrator',
  'teacher.settings.defaultGradingMode': 'Default Grading Mode',
  'teacher.settings.gradingTitle': 'Grading Settings',
  'teacher.settings.provider': 'Provider',
  'teacher.submissionDetail.breadcrumb': 'Submission Detail',
  'teacher.submissionDetail.needRewrite': 'Request Rewrite',
  'teacher.submissionDetail.regradeCheap': 'Regrade (Cheap)',
  'teacher.submissionDetail.regradeQuality': 'Regrade (Quality)',
  'teacher.submissionDetail.regradeQueued': 'Regrade queued',
  'teacher.submissionDetail.regradeFailed': 'Failed to regrade',
  'teacher.submissionDetail.title': 'Submission Detail',
};

const zhCN: Record<string, string> = {
  'admin.config.config': '配置',
  'admin.config.section.llm': 'LLM 服务',
  'admin.config.section.ocr': 'OCR 服务',
  'admin.config.section.budget': '预算控制',
  'admin.config.providerName': '服务名称',
  'admin.config.providerNamePlaceholder': 'OpenAI 兼容服务',
  'admin.config.baseUrl': 'Base URL',
  'admin.config.baseUrlPlaceholder': 'https://api.example.com',
  'admin.config.apiKey': 'API Key',
  'admin.config.apiKeyPlaceholder': 'sk-...',
  'admin.config.apiKeyHintSet': '已保存密钥，留空将保持不变。',
  'admin.config.apiKeyHintEmpty': '尚未保存密钥。',
  'admin.config.clearApiKey': '清除 API Key',
  'admin.config.model': '默认模型',
  'admin.config.modelPlaceholder': 'gpt-4o-mini',
  'admin.config.cheaperModel': '低成本模型',
  'admin.config.cheaperModelPlaceholder': 'gpt-4o-mini',
  'admin.config.qualityModel': '高质量模型',
  'admin.config.qualityModelPlaceholder': 'gpt-4.1',
  'admin.config.maxTokens': '最大 Token',
  'admin.config.temperature': '温度',
  'admin.config.topP': 'Top P',
  'admin.config.presencePenalty': '存在惩罚',
  'admin.config.frequencyPenalty': '频率惩罚',
  'admin.config.timeoutMs': '超时时间（ms）',
  'admin.config.responseFormat': '响应格式',
  'admin.config.responseFormatText': '文本',
  'admin.config.responseFormatJson': 'JSON 对象',
  'admin.config.stopSequences': '停止序列',
  'admin.config.stopSequencesPlaceholder': '添加停止序列',
  'admin.config.systemPrompt': '系统提示词',
  'admin.config.systemPromptPlaceholder': '可选的系统提示词覆盖',
  'admin.config.activeProvider': '当前 Provider',
  'admin.config.activeProviderPlaceholder': '使用默认 Provider',
  'admin.config.ocrBaseUrl': 'OCR Base URL',
  'admin.config.ocrBaseUrlPlaceholder': 'http://localhost:8000',
  'admin.config.ocrTimeout': 'OCR 超时（ms）',
  'admin.config.budgetEnabled': '启用每日预算',
  'admin.config.budgetMode': '预算模式',
  'admin.config.budgetHint': '软模式将降级评分，硬模式会阻断请求。',
  'admin.config.save': '保存配置',
  'admin.config.saved': '系统配置已保存',
  'admin.config.testLlm': '测试 LLM',
  'admin.config.testOcr': '测试 OCR',
  'admin.config.llmHealthOk': 'LLM 连通正常',
  'admin.config.llmHealthFail': 'LLM 连通失败',
  'admin.config.ocrHealthOk': 'OCR 连通正常',
  'admin.config.ocrHealthFail': 'OCR 连通失败',
  'admin.config.lastChecked': '上次检查',
  'admin.config.section.llmProviders': 'LLM Providers',
  'admin.config.section.llmTest': 'LLM 测试调用',
  'admin.config.section.llmLogs': 'LLM 调用日志',
  'admin.config.provider': 'Provider',
  'admin.config.providerId': 'Provider ID',
  'admin.config.providerIdPlaceholder': 'deepseek',
  'admin.config.providerIdRequired': '请输入提供商 ID',
  'admin.config.baseUrlRequired': '请输入 Base URL',
  'admin.config.providerPath': '接口路径',
  'admin.config.providerPathPlaceholder': '/v1/chat/completions',
  'admin.config.providerEnabled': '启用',
  'admin.config.customHeaders': '自定义 Header',
  'admin.config.headerKey': 'Header 名称',
  'admin.config.headerValue': 'Header 值',
  'admin.config.headerKeyRequired': '请输入 Header 名称',
  'admin.config.headerValueRequired': '请输入 Header 值',
  'admin.config.secret': '保密',
  'admin.config.public': '公开',
  'admin.config.addHeader': '添加 Header',
  'admin.config.modelPricing': '模型定价',
  'admin.config.priceIn': '输入价格',
  'admin.config.priceOut': '输出价格',
  'admin.config.modelRequired': '请输入模型名称',
  'admin.config.addModel': '添加模型',
  'admin.config.addProvider': '添加提供商',
  'admin.config.testProvider': '提供商',
  'admin.config.testProviderPlaceholder': '使用当前提供商',
  'admin.config.testModel': '模型覆盖',
  'admin.config.testPrompt': '测试提示词',
  'admin.config.testPromptPlaceholder': '用一句话打招呼',
  'admin.config.testPromptRequired': '请输入提示词',
  'admin.config.runTest': '开始测试',
  'admin.config.testSuccess': '成功',
  'admin.config.testFailed': '失败',
  'admin.config.llmTestFailed': 'LLM 测试失败',
  'admin.config.logTime': '时间',
  'admin.config.logProvider': '提供商 / 模型',
  'admin.config.logStatus': '状态',
  'admin.config.logSource': '来源',
  'admin.config.logTokens': 'Token',
  'admin.config.logLatency': '耗时',
  'admin.config.logCost': '成本',
  'admin.config.logId': '日志ID',
  'admin.config.logProviderName': '提供商',
  'admin.config.logProviderId': '提供商ID',
  'admin.config.logModel': '模型',
  'admin.config.logUserId': '用户ID',
  'admin.config.logSubmissionId': '提交ID',
  'admin.config.logPrompt': '提示词',
  'admin.config.logSystemPrompt': '系统提示词',
  'admin.config.logResponse': '响应内容',
  'admin.config.logError': '错误信息',
  'admin.config.logMeta': '元数据',
  'admin.config.logDetailTitle': 'LLM 日志详情',
  'admin.config.logProviderPlaceholder': '筛选提供商',
  'admin.config.logStatusPlaceholder': '筛选状态',
  'admin.config.logSourcePlaceholder': '筛选来源',
  'admin.config.confirmClearLogs': '清除所选日期之前的日志？',
  'admin.config.clearLogs': '清除日志',
  'admin.config.clearBefore': '清除日志早于',
  'admin.config.llmLogsCleared': '已清除日志',
  'admin.config.llmLogsClearFailed': '清除日志失败',
  'admin.config.dailyBudgetLimit': '每日预算上限',
  'admin.config.enableBudgetLimit': '启用预算限制',
  'admin.config.title': '管理员配置',
  'admin.dashboard.activeUsers': '活跃用户',
  'admin.dashboard.awaitingMetrics': '等待用户指标。',
  'admin.dashboard.llmCallsToday': '今日调用次数',
  'admin.dashboard.monitoringEmpty': '监控面板将在此显示',
  'admin.dashboard.realtimeUsage': '实时用量将在此显示。',
  'admin.dashboard.retentionPending': '留存任务结果待生成。',
  'admin.dashboard.retentionRuns': '留存任务',
  'admin.dashboard.systemOverview': '系统概览',
  'admin.dashboard.totalUsers': '用户总数',
  'admin.dashboard.totalClasses': '班级总数',
  'admin.dashboard.submissionsToday': '今日提交',
  'admin.dashboard.classHint': '统计包含已关联学生的班级。',
  'admin.dashboard.submissionHint': '从今日 0 点起的新提交。',
  'admin.dashboard.classSizeTitle': '班级人数概览',
  'admin.dashboard.viewAllClasses': '查看全部班级',
  'admin.dashboard.noClasses': '暂无班级',
  'admin.dashboard.students': '学生',
  'admin.dashboard.teachers': '教师',
  'admin.dashboard.homeworks': '作业',
  'admin.dashboard.admins': '管理员',
  'admin.dashboard.title': '管理员概览',
  'admin.usage.title': '用量面板',
  'admin.usage.rangeDays': '范围（天）',
  'admin.usage.summary': '汇总',
  'admin.usage.total': '总量',
  'admin.usage.dailyTrend': '每日趋势',
  'admin.usage.errorBreakdown': '错误分布',
  'admin.usage.noErrors': '暂无错误',
  'admin.usage.empty': '暂无用量数据',
  'admin.usage.loadFailed': '加载用量失败',
  'admin.usage.updatedAt': '更新于',
  'admin.classes.title': '班级管理',
  'admin.classes.empty': '暂无班级',
  'admin.classes.loadFailed': '加载班级失败',
  'admin.classes.noTeachers': '未分配教师',
  'admin.classes.teacherLabel': '教师',
  'admin.classes.assignTeachers': '分配教师',
  'admin.classes.assignTeachersSuccess': '教师已更新',
  'admin.classes.assignTeachersFailed': '更新教师失败',
  'admin.classes.manageStudents': '管理学生',
  'admin.classes.selectClass': '请选择班级',
  'admin.classes.noStudents': '班级暂无学生',
  'admin.classes.removeStudent': '移除',
  'admin.classes.removeStudentSuccess': '已移除学生',
  'admin.classes.removeStudentFailed': '移除学生失败',
  'admin.classes.importTitle': '导入学生',
  'admin.classes.importStudents': '导入学生',
  'admin.classes.importLabel': '学生名单',
  'admin.classes.importPlaceholder': '每行：账号,姓名（逗号或 Tab）',
  'admin.classes.importHint': '示例：student01,学生01',
  'admin.classes.importEmpty': '请粘贴学生名单',
  'admin.classes.importRequired': '学生名单不能为空',
  'admin.classes.importSuccess': '已导入学生',
  'admin.classes.importFailed': '导入学生失败',
  'admin.classes.studentCount': '学生数',
  'admin.retention.dryRun': '演练模式',
  'admin.retention.logsEmpty': '留存记录将在此显示',
  'admin.retention.logsTitle': '留存日志',
  'admin.retention.nextRun': '下次执行',
  'admin.retention.nextRunValue': '由后端定时任务触发',
  'admin.retention.batchSize': '批处理数量',
  'admin.retention.runRetention': '自动执行',
  'admin.retention.runTitle': '执行留存清理',
  'admin.retention.runNow': '立即执行',
  'admin.retention.runSuccess': '留存清理已启动',
  'admin.retention.runFailed': '留存清理失败',
  'admin.retention.lastRun': '最近执行',
  'admin.retention.ranAt': '执行时间',
  'admin.retention.mode': '模式',
  'admin.retention.dryRunMode': '演练',
  'admin.retention.liveMode': '正式',
  'admin.retention.scanned': '扫描',
  'admin.retention.deleted': '删除',
  'admin.retention.minioOk': 'MinIO 成功',
  'admin.retention.minioFailed': 'MinIO 失败',
  'admin.retention.dbFailed': '数据库失败',
  'admin.retention.duration': '耗时',
  'admin.retention.title': '留存',
  'admin.retention.window': '留存周期',
  'admin.retention.windowValue': '7 天',
  'admin.systemBudget.budgetMode': '预算模式',
  'admin.systemBudget.dailyCallLimit': '每日调用上限',
  'admin.systemBudget.empty': '预算分析将在此显示',
  'admin.systemBudget.mode.soft': '软模式',
  'admin.systemBudget.mode.hard': '硬模式',
  'admin.systemBudget.title': '系统预算',
  'admin.systemBudget.tokenLimit': 'Token 上限',
  'admin.systemBudget.usageTrends': '用量趋势',
  'admin.users.empty': '暂无用户',
  'admin.users.emptyHint': '接入用户管理后将在此显示。',
  'admin.users.loadError': '加载用户失败',
  'admin.users.name': '姓名',
  'admin.users.role': '角色',
  'admin.users.searchPlaceholder': '搜索用户',
  'admin.users.status': '状态',
  'admin.users.active': '启用',
  'admin.users.createUser': '创建用户',
  'admin.users.accountPlaceholder': 'student01',
  'admin.users.accountRequired': '请输入账号',
  'admin.users.namePlaceholder': '学生01',
  'admin.users.nameRequired': '请输入姓名',
  'admin.users.password': '密码',
  'admin.users.passwordRequired': '请输入密码',
  'admin.users.createSuccess': '用户已创建',
  'admin.users.createFailed': '创建用户失败',
  'admin.users.changeRole': '修改角色',
  'admin.users.updateSuccess': '用户已更新',
  'admin.users.updateFailed': '更新用户失败',
  'admin.users.resetPassword': '重置密码',
  'admin.users.newPassword': '新密码',
  'admin.users.resetSuccess': '密码已重置',
  'admin.users.resetFailed': '重置密码失败',
  'admin.users.assignClass': '分配班级',
  'admin.users.assignClassLabel': '班级',
  'admin.users.assignClassPlaceholder': '选择班级',
  'admin.users.assignClassRequired': '请选择班级',
  'admin.users.assignSuccess': '学生已分配',
  'admin.users.assignFailed': '分配学生失败',
  'app.adminConsole': '管理员控制台',
  'app.teacherConsole': '教师控制台',
  'app.title': '作业AI',
  'common.account': '账号',
  'common.action': '操作',
  'common.allRoles': '全部角色',
  'common.allStatuses': '全部状态',
  'common.avgShort': '均分',
  'common.backToClasses': '返回班级列表',
  'common.backToHomeworks': '返回作业列表',
  'common.class': '班级',
  'common.close': '关闭',
  'common.description': '描述',
  'common.detail': '详情',
  'common.days': '天',
  'common.disabled': '已禁用',
  'common.enabled': '已启用',
  'common.due': '截止',
  'common.dueAt': '截止时间',
  'common.dueDate': '截止时间',
  'common.homework': '作业',
  'common.language': '语言',
  'common.lastUpdated': '最近更新',
  'common.last7Days': '近7天',
  'common.realtime': '实时',
  'common.recent': '近期',
  'common.noDescription': '暂无描述',
  'common.noDescriptionProvided': '暂无描述。',
  'common.notConfigured': '未配置',
  'common.notSpecified': '未指定',
  'common.yes': '是',
  'common.no': '否',
  'common.overview': '概览',
  'common.reset': '重置',
  'common.remove': '移除',
  'common.retry': '重试',
  'common.score': '分数',
  'common.search': '搜索',
  'common.status': '状态',
  'common.student': '学生',
  'common.submit': '提交',
  'common.title': '标题',
  'common.tryAgain': '请稍后再试。',
  'common.view': '查看',
  'common.viewAllSubmissions': '查看全部提交',
  'errors.pageNotFoundSubtitle': '你访问的页面不存在。',
  'errors.pageNotFoundTitle': '页面未找到',
  'login.account': '账号',
  'login.accountPlaceholder': 'student01',
  'login.accountRequired': '请输入账号',
  'login.failure': '登录失败，请检查账号或密码。',
  'login.password': '密码',
  'login.passwordPlaceholder': '请输入密码',
  'login.passwordRequired': '请输入密码',
  'login.signIn': '登录',
  'login.success': '登录成功',
  'login.title': '登录',
  'login.welcomeTitle': '欢迎回来',
  'login.welcomeSubtitle': '在教学管理仪表盘中查看班级进度、作业表现与学习洞察。',
  'nav.admin': '管理员',
  'nav.budget': '预算',
  'nav.classes': '班级',
  'nav.config': '配置',
  'nav.dashboard': '概览',
  'nav.grading': '评分',
  'nav.homeworks': '作业',
  'nav.report': '报告',
  'nav.reports': '报表',
  'nav.retention': '留存',
  'nav.settings': '设置',
  'nav.student': '学生',
  'nav.students': '学生',
  'nav.submissions': '提交记录',
  'nav.system': '系统',
  'nav.teacher': '教师',
  'nav.users': '用户',
  'nav.usage': '用量',
  'role.admin': '管理员',
  'role.student': '学生',
  'role.teacher': '教师',
  'status.completed': '已完成',
  'status.done': '完成',
  'status.failed': '失败',
  'status.noDue': '无截止日期',
  'status.open': '进行中',
  'status.overdue': '已逾期',
  'status.processing': '处理中',
  'status.queued': '排队中',
  'student.dashboard.assignmentsAvailable': '可用作业',
  'student.dashboard.avgScoreTrend': '平均分趋势',
  'student.dashboard.loadError': '加载概览数据失败',
  'student.dashboard.noErrorInsights': '暂无错误洞察',
  'student.dashboard.noSubmissionSummary': '暂无提交汇总',
  'student.dashboard.noUpcomingDeadlines': '暂无即将截止的作业',
  'student.dashboard.reviewDeadlines': '请在作业列表查看截止时间',
  'student.dashboard.scoreTrendPlaceholder': '分数趋势将在此显示',
  'student.dashboard.topErrorTypes': '高频错误类型',
  'student.dashboard.upcomingDeadlines': '即将截止',
  'student.dashboard.updatedFromList': '已根据最新作业列表更新。',
  'student.dashboard.weeklySubmissions': '每周提交',
  'student.homeworkDetail.flexible': '弹性',
  'student.homeworkDetail.loadError': '加载作业失败',
  'student.homeworkDetail.noSubmissionHistory': '暂无提交记录',
  'student.homeworkDetail.notFound': '未找到作业',
  'student.homeworkDetail.submissionHistory': '提交历史',
  'student.homeworkDetail.submitHomework': '提交作业',
  'student.homeworkDetail.title': '作业详情',
  'student.homeworks.empty': '暂无作业',
  'student.homeworks.emptyHint': '老师发布作业后会显示在这里。',
  'student.homeworks.flexibleDeadline': '弹性截止',
  'student.homeworks.loadError': '加载作业失败',
  'student.homeworks.searchPlaceholder': '搜索作业或班级',
  'student.homeworks.title': '我的作业',
  'student.report.empty': '暂无分析数据',
  'student.report.emptyHint': '分析接口就绪后将显示图表与趋势。',
  'student.report.loadError': '加载报告失败',
  'student.report.rangeDays': '范围（天）',
  'student.report.summary': '汇总',
  'student.report.avgScore': '平均分',
  'student.report.highestScore': '最高分',
  'student.report.lowestScore': '最低分',
  'student.report.submissions': '提交次数',
  'student.report.noCompleted': '暂无已完成提交',
  'student.report.trend': '趋势',
  'student.report.noTrend': '暂无趋势数据',
  'student.report.errorTypes': '高频错误类型',
  'student.report.noErrorStats': '暂无错误统计',
  'student.report.nextSteps': '下一步建议',
  'student.report.noNextSteps': '暂无后续建议',
  'student.report.exportPdf': '导出 PDF',
  'student.report.exportFailed': '导出失败',
  'student.report.title': '个人报告',
  'student.submissions.empty': '暂无提交记录',
  'student.submissions.emptyHint': '提交作业后会显示在这里。',
  'student.submissions.scoreRange': '分数区间',
  'student.submissions.dateRangeStart': '开始日期',
  'student.submissions.dateRangeEnd': '结束日期',
  'student.submissions.exportCsv': '导出 CSV',
  'student.submissions.exportFailed': '导出失败',
  'student.submissions.loadError': '加载提交记录失败',
  'student.submissions.searchPlaceholder': '按作业搜索',
  'submission.error.llmError': '评分服务异常，请重试。',
  'submission.error.llmInvalid': '评分结果无效，请重试。',
  'submission.error.llmQuota': '今日评分额度已用完，请明天再试。',
  'submission.error.llmTimeout': '评分超时，请稍后再试。',
  'submission.error.ocrEmpty': '未检测到可读文字，请上传更清晰的图片。',
  'submission.error.ocrError': 'OCR 服务异常，请重试。',
  'submission.error.ocrTimeout': 'OCR 超时，请稍后再试。',
  'submission.errors': '错误数',
  'submission.failureFallback': '请稍后重新提交。',
  'submission.feedback': '反馈',
  'submission.highlights': '重点摘要',
  'submission.loadError': '加载提交结果失败',
  'submission.nextSteps': '下一步建议',
  'submission.noData': '暂无提交数据',
  'submission.noNextSteps': '暂无后续建议',
  'submission.ocrLength': 'OCR 字数',
  'submission.ocrText': 'OCR 文本',
  'submission.processingFailed': '处理失败',
  'submission.processingTimeline': '处理时间线',
  'submission.resultTitle': '提交结果',
  'submission.rewrite': '改写建议',
  'submission.sampleEssay': '范文参考',
  'submission.suggestionsErrors': '错误',
  'submission.suggestionsErrorsEmpty': '未发现错误',
  'submission.suggestionsHigh': '高级',
  'submission.suggestionsHighEmpty': '暂无高级建议',
  'submission.suggestionsLow': '基础',
  'submission.suggestionsLowEmpty': '暂无基础建议',
  'submission.suggestionsMid': '进阶',
  'submission.suggestionsMidEmpty': '暂无进阶建议',
  'submission.suggestionsSummary': '总结',
  'submission.suggestionsSummaryEmpty': '评分完成后显示总结',
  'submission.summary': '总结',
  'submission.timeline.completed': '已完成',
  'submission.timeline.failed': '失败',
  'submission.timeline.llmGrading': '模型评分中',
  'submission.timeline.ocrProcessing': 'OCR 识别中',
  'submission.timeline.queued': '排队中',
  'submission.totalScore': '总分',
  'submission.waiting': '等待处理',
  'submit.breadcrumb': '提交',
  'submit.created': '提交已创建',
  'submit.draggerHint': '支持 JPG/PNG，上传1-3张图片。字迹清晰可提升识别准确率。',
  'submit.draggerText': '拖拽图片到此处或点击上传',
  'submit.failed': '提交失败，请稍后再试',
  'submit.missingId': '缺少作业ID',
  'submit.missingReference': '缺少作业信息',
  'submit.missingReferenceDesc': '请返回作业列表选择作业。',
  'submit.onlyThree': '最多只能上传3张图片',
  'submit.tip1': '上传1-3张清晰的手写作文图片。',
  'submit.tip2': '避免阴影并裁剪边缘，以提升识别效果。',
  'submit.tip3': '确保字迹清晰、行距整齐。',
  'submit.tipsTitle': '提交建议',
  'submit.title': '提交作业',
  'submit.uploadAtLeastOne': '请至少上传一张图片',
  'submit.uploadLimit': '最多上传3张图片',
  'submit.uploadTitle': '上传作业',
  'teacher.classDetail.className': '班级名称',
  'teacher.classDetail.grade': '年级',
  'teacher.classDetail.loadError': '加载班级失败',
  'teacher.classDetail.loadHomeworksError': '加载作业失败',
  'teacher.classDetail.loadStudentsError': '加载学生失败',
  'teacher.classDetail.noHomeworks': '暂无作业',
  'teacher.classDetail.noStudents': '暂无学生',
  'teacher.classDetail.notFound': '未找到班级',
  'teacher.classDetail.downloadReport': '下载 PDF',
  'teacher.classDetail.downloadFailed': '下载报告失败',
  'teacher.classDetail.importTitle': '导入学生',
  'teacher.classDetail.importStudents': '导入学生',
  'teacher.classDetail.importLabel': '学生名单',
  'teacher.classDetail.importPlaceholder': '每行：账号,姓名（逗号或 Tab）',
  'teacher.classDetail.importHint': '示例：student01,学生01',
  'teacher.classDetail.importEmpty': '请粘贴学生名单',
  'teacher.classDetail.importRequired': '学生名单不能为空',
  'teacher.classDetail.importSuccess': '已导入学生',
  'teacher.classDetail.importFailed': '导入学生失败',
  'teacher.classDetail.studentName': '学生姓名',
  'teacher.classDetail.title': '班级详情',
  'teacher.classDetail.unassigned': '未分配',
  'teacher.classes.class': '班级',
  'teacher.classes.className': '班级名称',
  'teacher.classes.classNamePlaceholder': '七年级1班',
  'teacher.classes.classNameRequired': '请输入班级名称',
  'teacher.classes.create': '创建班级',
  'teacher.classes.createFailed': '创建班级失败',
  'teacher.classes.created': '班级已创建',
  'teacher.classes.empty': '暂无班级',
  'teacher.classes.grade': '年级',
  'teacher.classes.gradePlaceholder': '七年级',
  'teacher.classes.loadError': '加载班级失败',
  'teacher.classes.unassigned': '未分配',
  'teacher.dashboard.avgScoreTrend': '平均分趋势',
  'teacher.dashboard.classes': '班级数',
  'teacher.dashboard.loadError': '加载概览失败',
  'teacher.dashboard.noActivity': '暂无动态数据',
  'teacher.dashboard.noInsights': '暂无洞察',
  'teacher.dashboard.reviewSchedules': '查看班级进度',
  'teacher.dashboard.scoreTrendPlaceholder': '分数趋势将在此显示',
  'teacher.dashboard.submissionActivity': '提交动态',
  'teacher.dashboard.topMistakes': '高频错误',
  'teacher.dashboard.trackClasses': '查看你管理的班级。',
  'teacher.dashboard.upcomingDeadlines': '即将截止',
  'teacher.homeworkDetail.classReference': '班级标识',
  'teacher.homeworkDetail.loadSubmissionsError': '加载提交记录失败',
  'teacher.homeworkDetail.noSubmissions': '暂无提交记录',
  'teacher.homeworkDetail.noSubmissionsHint': '学生提交作业后会显示在这里。',
  'teacher.homeworkDetail.notSpecified': '未指定',
  'teacher.homeworkDetail.searchPlaceholder': '搜索学生或账号',
  'teacher.homeworkDetail.scoreRange': '分数区间',
  'teacher.homeworkDetail.dateRangeStart': '开始日期',
  'teacher.homeworkDetail.dateRangeEnd': '结束日期',
  'teacher.homeworkDetail.retryFailed': '重评失败项',
  'teacher.homeworkDetail.retryFailedSuccess': '已加入重评分队列',
  'teacher.homeworkDetail.retryFailedFailed': '重评分失败',
  'teacher.homeworkDetail.regrade': '重评',
  'teacher.homeworkDetail.regradeQuality': '高质量重评',
  'teacher.homeworkDetail.regradeSuccess': '已加入重评分队列',
  'teacher.homeworkDetail.regradeFailed': '重评分失败',
  'teacher.homeworkDetail.exportCsv': '导出 CSV',
  'teacher.homeworkDetail.exportImages': '打包下载图片',
  'teacher.homeworkDetail.exportReminders': '导出未交名单',
  'teacher.homeworkDetail.exportFailed': '导出失败',
  'teacher.homeworkDetail.title': '作业详情',
  'teacher.homeworkDetail.unavailable': '作业详情不可用',
  'teacher.batchUpload.title': '批量上传',
  'teacher.batchUpload.tipsTitle': '上传提示',
  'teacher.batchUpload.tip1': '使用学生账号作为文件夹或文件名前缀。',
  'teacher.batchUpload.tip2': '示例：student01/1.jpg 或 student01__1.jpg。',
  'teacher.batchUpload.tip3': '支持 zip 或一次最多 100 张图片。',
  'teacher.batchUpload.draggerText': '拖拽 zip 或图片到此处，或点击上传',
  'teacher.batchUpload.draggerHint': '支持 .zip 和图片文件，每批最多 100 张。',
  'teacher.batchUpload.preview': '预览映射',
  'teacher.batchUpload.previewTitle': '预览汇总',
  'teacher.batchUpload.previewSuccess': '预览完成',
  'teacher.batchUpload.previewFailed': '预览失败',
  'teacher.batchUpload.submit': '开始上传',
  'teacher.batchUpload.applyUpload': '确认上传',
  'teacher.batchUpload.success': '批量上传已排队',
  'teacher.batchUpload.failed': '批量上传失败',
  'teacher.batchUpload.uploadAtLeastOne': '请至少上传一个文件',
  'teacher.batchUpload.invalidFile': '仅支持图片或 .zip 压缩包',
  'teacher.batchUpload.onlyOneZip': '仅允许上传一个 zip 文件',
  'teacher.batchUpload.zipOrImagesOnly': '请仅上传 zip 或图片，不要混合',
  'teacher.batchUpload.imageLimit': '最多上传 100 张图片',
  'teacher.batchUpload.missingHomework': '缺少作业信息',
  'teacher.batchUpload.resultTitle': '上传结果',
  'teacher.batchUpload.totalImages': '图片总数',
  'teacher.batchUpload.matchedImages': '已匹配图片',
  'teacher.batchUpload.unmatchedImages': '未匹配图片',
  'teacher.batchUpload.acceptedImages': '有效图片',
  'teacher.batchUpload.createdSubmissions': '创建的提交',
  'teacher.batchUpload.groupsTitle': '已匹配学生',
  'teacher.batchUpload.imageCount': '图片数',
  'teacher.batchUpload.noGroups': '暂无匹配学生',
  'teacher.batchUpload.unmatchedTitle': '未匹配文件',
  'teacher.batchUpload.assignStudent': '指定学生',
  'teacher.batchUpload.noUnmatched': '没有未匹配文件',
  'teacher.batchUpload.skippedTitle': '跳过的文件',
  'teacher.batchUpload.noSkipped': '没有跳过的文件',
  'teacher.batchUpload.reason.nonImage': '非图片文件',
  'teacher.batchUpload.reason.accountNotFound': '未识别学生账号',
  'teacher.batchUpload.reason.studentNotFound': '班级中找不到学生',
  'teacher.batchUpload.historyTitle': '上传记录',
  'teacher.batchUpload.historyEmpty': '暂无上传记录',
  'teacher.batchUpload.historyCreatedAt': '上传时间',
  'teacher.batchUpload.historyUploader': '上传人',
  'teacher.batchUpload.historyStatus': '状态',
  'teacher.batchUpload.progress': '进度',
  'teacher.batchUpload.retryFailed': '重试失败项',
  'teacher.batchUpload.retryFailedSuccess': '重试已排队',
  'teacher.batchUpload.retryFailedFailed': '重试失败',
  'teacher.batchUpload.partial': '部分完成',
  'teacher.batchUpload.empty': '无记录',
  'teacher.batchUpload.detailTitle': '批量上传详情',
  'teacher.batchUpload.detailSummary': '批次概览',
  'teacher.batchUpload.detailSkipped': '跳过文件',
  'teacher.batchUpload.detailNoSkipped': '没有跳过的文件',
  'teacher.batchUpload.detailSubmissions': '提交列表',
  'teacher.batchUpload.detailEmpty': '未找到批次',
  'teacher.batchUpload.detailLoadFailed': '加载批次失败',
  'teacher.batchUpload.mode': '模式',
  'teacher.batchUpload.needRewrite': '需要改写',
  'teacher.homeworks.createClass': '创建班级',
  'teacher.homeworks.createFailed': '创建作业失败',
  'teacher.homeworks.createHomework': '创建作业',
  'teacher.homeworks.created': '作业已创建',
  'teacher.homeworks.descriptionPlaceholder': '写一篇300词作文',
  'teacher.homeworks.empty': '暂无作业',
  'teacher.homeworks.homeworkTitle': '作业标题',
  'teacher.homeworks.homeworkTitlePlaceholder': '作文练习',
  'teacher.homeworks.homeworkTitleRequired': '请输入标题',
  'teacher.homeworks.loadClassesError': '加载班级失败',
  'teacher.homeworks.loadHomeworksError': '加载作业失败',
  'teacher.homeworks.noClasses': '暂无班级',
  'teacher.homeworks.submissionRate': '已提交',
  'teacher.homeworks.submissionStatus': '批改状态',
  'teacher.homeworks.pendingLabel': '未交',
  'teacher.homeworks.selectClass': '选择班级',
  'teacher.homeworks.selectClassFirst': '请先选择班级',
  'teacher.reports.avgScore': '平均分',
  'teacher.reports.highestScore': '最高分',
  'teacher.reports.loadError': '加载报表失败',
  'teacher.reports.lowestScore': '最低分',
  'teacher.reports.noCompleted': '暂无已完成提交',
  'teacher.reports.noData': '暂无报表数据',
  'teacher.reports.noDistribution': '暂无分布数据',
  'teacher.reports.noErrorStats': '暂无错误统计',
  'teacher.reports.noRanking': '暂无排名数据',
  'teacher.reports.noTrend': '暂无趋势数据',
  'teacher.reports.rangeDays': '范围（天）',
  'teacher.reports.insightsTitle': '班级洞察',
  'teacher.reports.totalStudents': '学生总数',
  'teacher.reports.submittedStudents': '已提交学生',
  'teacher.reports.pendingStudents': '未提交学生',
  'teacher.reports.submissionRate': '提交率',
  'teacher.reports.exportPdf': '导出 PDF',
  'teacher.reports.exportCsv': '导出 CSV',
  'teacher.reports.exportFailed': '导出失败',
  'teacher.reports.scoreDistribution': '分数分布',
  'teacher.reports.selectClass': '选择班级',
  'teacher.reports.selectClassHint': '请选择班级查看报表',
  'teacher.reports.submissions': '提交次数',
  'teacher.reports.summary': '汇总',
  'teacher.reports.title': '班级报表',
  'teacher.reports.topErrorTypes': '高频错误类型',
  'teacher.reports.topStudents': '优秀学生',
  'teacher.reports.trend': '趋势',
  'teacher.settings.advancedEmpty': '高级评分设置由管理员管理',
  'teacher.settings.advancedTitle': '高级设置',
  'teacher.settings.budgetMode': '预算模式',
  'teacher.settings.configuredByAdmin': '由管理员配置',
  'teacher.settings.defaultGradingMode': '默认评分模式',
  'teacher.settings.gradingTitle': '评分设置',
  'teacher.settings.provider': '服务提供方',
  'teacher.submissionDetail.breadcrumb': '提交详情',
  'teacher.submissionDetail.needRewrite': '请求改写',
  'teacher.submissionDetail.regradeCheap': '低成本重评',
  'teacher.submissionDetail.regradeQuality': '高质量重评',
  'teacher.submissionDetail.regradeQueued': '已加入重评分队列',
  'teacher.submissionDetail.regradeFailed': '重评分失败',
  'teacher.submissionDetail.title': '提交详情',
};

const translations: Record<Language, Record<string, string>> = {
  'en-US': enUS,
  'zh-CN': zhCN,
};

const I18nContext = createContext<I18nContextValue | undefined>(undefined);

const getInitialLanguage = (): Language => {
  if (typeof window !== 'undefined') {
    const stored = window.localStorage.getItem(STORAGE_KEY);
    if (stored === 'zh-CN' || stored === 'en-US') {
      return stored;
    }
    const browserLang = window.navigator?.language?.toLowerCase() || '';
    if (browserLang.startsWith('zh')) {
      return 'zh-CN';
    }
  }
  return 'zh-CN';
};

export const I18nProvider = ({ children }: { children: ReactNode }) => {
  const [language, setLanguageState] = useState<Language>(() => getInitialLanguage());

  const setLanguage = useCallback((lang: Language) => {
    setLanguageState(lang);
    if (typeof window !== 'undefined') {
      window.localStorage.setItem(STORAGE_KEY, lang);
    }
  }, []);

  useEffect(() => {
    if (typeof document !== 'undefined') {
      document.documentElement.lang = language;
    }
  }, [language]);

  const t = useCallback(
    (key: string) => translations[language][key] || translations['en-US'][key] || key,
    [language],
  );

  const value = useMemo<I18nContextValue>(
    () => ({ language, setLanguage, t }),
    [language, setLanguage, t],
  );

  return createElement(I18nContext.Provider, { value }, children);
};

export const useI18n = () => {
  const context = useContext(I18nContext);
  if (!context) {
    throw new Error('useI18n must be used within I18nProvider');
  }
  return context;
};
